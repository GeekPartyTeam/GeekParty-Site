{% import 'GeekPartyBundle::macros.html.twig' as macros %}
{% import 'GeekPartyBundle::_projects/macros.html.twig' as macros_project %}

{% set unuploaded = {} %}
{% set uploaded = {} %}
{% for entry in projects %}
    {% if not is_work_uploaded(entry) %}
        {% set unuploaded = unuploaded|merge([entry]) %}
    {% else %}
        {% set uploaded = uploaded|merge([entry]) %}
    {% endif %}
{% endfor %}

<div class="col-md-6 col-xs-12">
    {% for entry in uploaded %}
        {% if loop.index0 % 2 == 0 %}
            {{ macros_project.project_block(entry, current_user) }}
        {% endif %}
    {% endfor %}
</div>

<div class="col-md-6 col-xs-12">
    {% for entry in uploaded %}
        {% if loop.index0 % 2 != 0 %}
            {{ macros_project.project_block(entry, current_user) }}
        {% endif %}
    {% endfor %}
</div>

{% if uploaded|length == 0 %}
    <div class="col-md-12">
        <h4>Ни одна работа не загружена</h4>
    </div>
{% endif %}


{% if unuploaded|length > 0 %}
    <h4 class="UnuploadedListHeader">Незагруженные работы</h4>
<div class="container-fluid">
    {% for entry in unuploaded %}
	{% if loop.index % 2 == 0 %}
        <div class="col-md-6 col-xs-12">
			{{ macros_project.project_block(entry, current_user) }}
        </div>
		{% if unuploaded[loop.index + 1] is defined %}
        <div class="col-md-6 col-sm-12">
			{{ macros_project.project_block(entry, current_user) }}
        </div>
		{% endif %}
	{% endif %}
	{% endfor %}
</div>
{% endif %}